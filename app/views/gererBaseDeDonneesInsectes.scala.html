@*********************************************************************************
 * 
 *   Copyright 2014 BOUSSEJRA Malik Olivier, HALDEBIQUE Geoffroy, ROYER Johan
 *
 *   Licensed under the Apache License, Version 2.0 (the "License");
 *   you may not use this file except in compliance with the License.
 *   You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 *   Unless required by applicable law or agreed to in writing, software
 *   distributed under the License is distributed on an "AS IS" BASIS,
 *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *   See the License for the specific language governing permissions and
 *   limitations under the License.
 *   
 ********************************************************************************@
@(especes : List[Espece], sousFamilles : List[SousFamille], familles : List[Famille], superFamilles : List[SuperFamille], ordres : List[Ordre])
@main("Gérer la Base de Données des Insectes"){<header>
		<dl>
		<a href="/">Retour</a>
		</dl>
	</header>
	<h1> Page pour que l'admin puisse modifier la base de données des insectes </h1>
	<h2> Liste des espèces </h2>
	<table>
		<tr>
			<th>Systématique</th>
			<th>Espece</th>
			<th>
				<form action="/especesParSousFamille" method="GET">
				<select name="sous_famille_tri" onchange="this.form.submit()">
					<option value="-1">Sous-famille</options>
					<option value="0">Toutes(retour)</option>
					@for(sousFamille <- sousFamilles){
					<option value="@sousFamille.sous_famille_id">@sousFamille.sous_famille_nom</option>}
				</select>
				</form>
			</th>
			<th>
				<form action="/especesParFamille" method="GET">
				<select name="famille_tri" onchange="this.form.submit()">
					<option value="-1">Famille</options>
					<option value="0">Toutes(retour)</option>
					@for(famille <- familles){
					<option value="@famille.famille_id">@famille.famille_nom</option>}
				</select>
				</form>
			</th>
			<th>
				<form action="/especesParSuperFamille" method="GET">
				<select name="super_famille_tri" onchange="this.form.submit()">
					<option value="-1">Super-famille</options>
					<option value="0">Toutes(retour)</option>
					@for(superFamille <- superFamilles){
					<option value="@superFamille.super_famille_id">@superFamille.super_famille_nom</option>}
				</select>
				</form>
			</th>
			<th>
				<form action="/especesParOrdre" method="GET">
				<select name="ordre_tri" onchange="this.form.submit()">
					<option value="-1">Ordre</options>
					<option value="0">Tous(retour)</option>
					@for(ordre <- ordres){
					<option value="@ordre.ordre_id">@ordre.ordre_nom</option>}
				</select>
				</form>
			</th>
			<th>Sous Groupe</th>
			<th>Groupe</th>
			<th>Action</th>
		</tr>
		@for(espece <- especes){
		<tr>
			<td>@espece.espece_systematique</td>
			<td>@espece.espece_nom</td>
			<td>@espece.getSousFamille()</td>
			<td>@espece.getFamille()</td>
			<td>@espece.getSuperFamille()</td>
			<td>@espece.getOrdre()</td>
			<td>@espece.espece_sous_groupe</td>
			<td>@espece.getGroupe()</td>
			<td><button type="submit">Supprimer</button></td>
		</tr>
		}
	</table>
		<p>
			<button onClick="visibleAjoutEspece()">Ajouter une espèce</button>
		</p>
		<form action="/gererBaseDeDonneesInsectes" method="POST">
		<div id="nouv_espece" style="display:none">
		<h2>Ajouter une espèce</h2>
			<table>
				<tr>
					<th>Nom</th>
					<th>Auteur</th>
					<th>Systématique</th>
					<th>Photo</th>
					<th>Avec ou sans sous-famille</th>
					<th>Sous Famille ou Famille</th>
					<th>Commentaires</th>
				</tr>
				<tr>
					<td><input type="text" size="20" name="nom" value=""></td>
					<td><input type="text" size="20" name="auteur" value=""></td>
					<td><input type="text" size="5" name="systématique" value=""></td>
					<td><input type="file" name="photo" value=""></td>
					<td>
						<input type="radio" name="aUneSousFamille" onClick="afficherBonneListe()" value="sousfam">A une sous-famille<br>
						<input type="radio" name="aUneSousFamille" onClick="afficherBonneListe()" value="fam">Pas de sous-famille
					</td>
					<td>
						<select id="sousfamille" name="sous_famille" style="display:none">
							<option value="-1">&nbsp;</option>
							@for(sousFamille <- sousFamilles){
							<option value="@sousFamille.sous_famille_id">@sousFamille.sous_famille_nom</option>}
						</select>
						<select id="famille" name="famille" style="display:none">
							<option value="-1">&nbsp;</option>
							@for(famille <- familles){
							<option value="@famille.famille_id">@famille.famille_nom</option>}
						</select>
					</td>
					<td><input type="text" size="30" name="commentaires" value=""></td>
				</tr>
				<tr>
					<td><button type="submit">Ajouter l'espèce</button></td>
				</tr>
			</table>
		</div>
		</form>
	}{<script>
	function visibleAjoutEspece() {
		if (document.getElementById("nouv_espece").style.display == "none") {
			document.getElementById("nouv_espece").style.display = "block";
		} else {
			document.getElementById("nouv_espece").style.display = "none";
		}
	}
	function afficherBonneListe() {
		if($('input[type=radio][name=aUneSousFamille]:checked').attr('value') == 'sousfam') {
			document.getElementById("sousfamille").style.display = "block";
			document.getElementById("famille").style.display = "none";
		} else if ($('input[type=radio][name=aUneSousFamille]:checked').attr('value') == 'fam') {
			document.getElementById("sousfamille").style.display = "none";
			document.getElementById("famille").style.display = "block";
		}
	}
	</script>}
